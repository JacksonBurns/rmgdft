if(USE_NUMA_INTERNAL)
target_link_libraries(${rmg} ${NUMA_LIBRARIES})
endif(USE_NUMA_INTERNAL)
if(USE_LIBXC)
add_dependencies(${rmg} libxc)
target_link_libraries(${rmg} ${LIBXC_LIBRARIES})
endif(USE_LIBXC)
#add_dependencies(${rmg} libspg)
target_link_libraries( ${rmg} symspg_static)
# static libraries are created for the object files in each subdir. Duplicates
# are needed to handle circular references
target_link_libraries( ${rmg} RmgLib zfp)
if(USE_NUMA_INTERNAL)
target_link_libraries( ${rmg} RMG_Common ${NUMA_LIBRARIES} zfp)
endif(USE_NUMA_INTERNAL)
target_link_libraries( ${rmg} InternalPseudo)
if(RMG_GPU_ENABLED)
    target_link_libraries( ${rmg} Gpufuncs)
endif()
if(HDF5_FOUND)
    target_link_libraries( ${rmg} ${HDF5_LIBRARIES})
endif()
target_link_libraries( ${rmg} Finite_diff RMG_Common RmgLib ${ZLIB} ${FFTW_LIBRARIES})
target_link_libraries( ${rmg} Misc RMG_Common Finite_diff RmgLib)
target_link_libraries( ${rmg} RMG_Common Force)
target_link_libraries( ${rmg} Force RMG_Common)
target_link_libraries( ${rmg} Input InternalPseudo)
target_link_libraries( ${rmg} RMG_Common RmgLib)
target_link_libraries( ${rmg} RMG_Common RmgLib)
target_link_libraries( ${rmg} Finite_diff Misc RmgLib)
target_link_libraries( ${rmg} Misc Finite_diff RmgLib)
target_link_libraries( ${rmg} Input)
if(USE_LIBXC)
target_link_libraries( ${rmg} XC_useLIBXC ${LIBXC_LIBRARIES} ${LIBXC_LIBRARIES_F90})
target_link_libraries( ${rmg} XC_useLIBXC ${LIBXC_LIBRARIES_F90} ${LIBXC_LIBRARIES})
target_link_libraries( ${rmg} XC_useLIBXC Misc RmgLib)
target_link_libraries( ${rmg} XC_useLIBXC Finite_diff)
target_link_libraries( ${rmg} XC_useLIBXC RmgLib)
target_link_libraries( ${rmg} XC_useLIBXC RMG_Spin)
else(USE_LIBXC)
target_link_libraries( ${rmg} XC)
target_link_libraries( ${rmg} XC)
endif(USE_LIBXC)
target_link_libraries( ${rmg} RMG_Spin)
target_link_libraries( ${rmg} US_PP Input)
target_link_libraries( ${rmg} RMG_Common US_PP)
target_link_libraries( ${rmg} US_PP RMG_Common)
target_link_libraries( ${rmg} Force)
target_link_libraries( ${rmg} Force US_PP)
target_link_libraries( ${rmg} US_PP Force)
if(RMG_GPU_ENABLED)
    target_link_libraries( ${rmg} RMG_Subdiag Gpufuncs Finite_diff RMG_Common RmgLib ${MAGMA_LIBRARIES} ${SCALAPACK_LIBRARIES})
    target_link_libraries( ${rmg} RMG_Subdiag Gpufuncs Misc RmgLib ${SCALAPACK_LIBRARIES})
else()
    target_link_libraries( ${rmg} RMG_Subdiag Finite_diff RMG_Common RmgLib ${MAGMA_LIBRARIES} ${SCALAPACK_LIBRARIES})
    target_link_libraries( ${rmg} RMG_Subdiag Misc RmgLib ${SCALAPACK_LIBRARIES})
endif()
target_link_libraries( ${rmg} ${FFTW_LIBRARIES} )
if(USE_PLPLOT_LIBS)
    target_link_libraries( ${rmg} ${PLplot_cxx_LIBRARY} ${PLplot_LIBRARY} )
    target_link_libraries( ${rmg} Misc RmgLib ${PLplot_LIBRARY})
endif(USE_PLPLOT_LIBS)
if(CRAY_XK)
    target_link_libraries( ${rmg} ${BZ2_LIBRARIES})
endif(CRAY_XK)
if(NOT CRAY_XK)
    target_link_libraries( ${rmg} scalapack)
endif(NOT CRAY_XK)
target_link_libraries( ${rmg} ${Boost_LIBRARIES} ${BZ2_LIBRARIES})
if(USE_OPENBABEL_LIBS)
    target_link_libraries( ${rmg} ${OPENBABEL_LIBRARIES})
endif(USE_OPENBABEL_LIBS)

